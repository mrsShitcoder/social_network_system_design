# social_network_system_design
## Функциональные требования
- публикация постов из путешествий с фотографиями, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;
## Нефункциональные требования
- 10 000 000 DAU
- Один пользователь в среднем делает 1 пост в неделю
- В среднем пользователь прикладывает 3 изображения в пост
- В среднем один пользователь просматривает 50 постов в сутки
- В среднем один пользователь пользуется поиском по постам 1 раз в сутки
- В среднем 1 пользователь оценивает 20 постов в сутки
- В среднем один пользователь комментирует 10 постов в сутки
- В среднем один пользователь просматривает 10 комментариев в сутки
- Гео распределенность не нужна
- Есть сезонность - сезон отпусков, праздники.
- Во время сезона количество постов увеличивается в 2 раза
- Во время сезона пользователи в 10 раз чаще используют поиск по постам
- Данные хранятся всегда
- Пользователь может создать не больше 100 постов в сутки
- Один пост не можеь содержать больше 10 изображений
- Комментарий не должен превышать 1000 символов
- Описание поста не должно превышать 1000 символов
- Изображение в посте не должно превышать 5 Мб
- Пост должен публиковаться за 5 секунд
- Комментарий должен публиковаться за 1 секунду
- Загрузка поста в ленте не должна превышать 1 секунду
- Доступность 99.95%
## Оценка нагрузки
### RPS Создание постов (не в сезон)
- DAU 10 000 000
- Один пользователь в среднем делает 1 пост в неделю
- 10 000 000 / 7 / 86400 ~= 20
### RPS Создание постов (в сезон)
- DAU 10 000 000
- Один пользователь в среднем делает 1 пост в неделю
- Во время сезона количество постов увеличивается в 2 раза
- 10 000 000 / 7 / 86400 * 2 ~= 40
### RPS Просмотр постов (не в сезон)
- DAU 10 000 000
- В среднем один пользователь просматривает 50 постов в сутки
- 10 000 000 * 50 / 86400 ~= 6000
### RPS Просмотр постов (в сезон)
- DAU 10 000 000
- В среднем один пользователь просматривает 50 постов в сутки
- Во время сезона количество постов увеличивается в 2 раза
- 10 000 000 * 50 * 2 / 86400 ~= 12000
### RPS Поиск постов (не в сезон)
- DAU 10 000 000
- В среднем один пользователь пользуется поиском по постам 1 раз в сутки
- 10 000 000 / 86400 ~= 120
### RPS Поиск постов (в сезон)
- DAU 10 000 000
- В среднем один пользователь пользуется поиском по постам 1 раз в сутки
- Во время сезона пользователи в 10 раз чаще используют поиск по постам
- 10 000 000 * 10 / 86400 ~= 1200
### RPS Комментарии 
- DAU 10 000 000
- В среднем один пользователь комментирует 10 постов в сутки
- 10 000 000 * 10 / 86400 ~= 1200
### RPS Просмотр комментариев
- DAU 10 000 000
- В среднем один пользователь просматривает 10 комментариев в сутки
- 10 000 000 * 10 / 86400 ~= 1200
### RPS Оценки постов
- DAU 10 000 000
- В среднем 1 пользователь оценивает 20 постов в сутки
- 10 000 000 * 20 / 86400 ~= 2400
### Примерный размер поста
- id пользователя 8 байт
- id поста 8 байт
- В среднем пользователь прикладывает 3 изображения в пост
- Возьмем средний размер изображения 2 Мб
- Возьмем средний размер описания 300 байт
- Размер геометки 16 байт
- Примерный размер поста 5 Мб
### Примерный размер комментария
id пользователя 8 байт
id поста 8 байт
id комментария 8 байт
Примерный размер контента комментария 400 байт
Возьмем примерный размер комментария 500 байт
### Примерный размер оценки
id пользователя 8 байт
id поста 8 байт
Примерный размер оценки 16 байт
### Traffic Создание постов (не в сезон)
5 Мб * 20 RPS ~= 100 Мб/c
### Traffic Создание постов (в сезон)
5 Мб * 200 RPS ~= 1 Гб/c
### Traffic Просмотр постов (не в сезон)
5 Мб * 6000 ~= 30 Гб/c
### Traffic Просмотр постов (в сезон)
5 Мб * 12000 ~= 60 Гб/c
### Traffic Поиск постов (не в сезон)
5 Мб * 120 ~= 600 Мб/c
### Traffic Поиск постов (в сезон)
5 Мб * 1200 ~= 6 Гб/c
### Traffic Комментарии 
300 байт * 1200 ~= 4 Кб
### Traffic Просмотр комментариев
300 байт * 1200 ~= 4 Кб
### Traffic Оценки постов
16 байт  * 2400 ~= 40 Кб
